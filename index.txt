const contenedorCartas = document.getElementById('cartas')

function crearCartas(carta){
return `<div class="card first">
<img src="${carta.image}" class="card-img-top" alt="...">
<section class="card-body">
  <h5 class="card-title">${carta.name}</h5>
  <p class="card-text">${carta.description}</p>
  <div class="d-flex justify-content-evenly">
    <p>Price: $${carta.price}</p>
    <a href= "./assets/pages/details.html?_id=${carta._id}" class="btn btn-primary">Details</a>
  </div>
</section>
</div>`

}

function imprimirCartas (eventos, contenedorCartas){
  for (const evento of eventos) {
    const cartaHTML = crearCartas(evento);
    contenedorCartas.innerHTML += cartaHTML
  }
}

imprimirCartas(data.events, contenedorCartas);


const categorias = document.getElementById('categorias')


function crearCheckbox(categories){
 return `<div>
 <input type="checkbox" value="${categories}">
 <label>${categories}</label>
 </div>`
}

data.events.map((eventos)=>eventos.category)
let categoriesRepetidas = data.events.map((eventos)=>eventos.category)

const setCategoriesNoRepetidas = new Set(categoriesRepetidas)
console.log(setCategoriesNoRepetidas)

const arrayCategoriesNoRepetidas = Array.from(setCategoriesNoRepetidas)
console.log(arrayCategoriesNoRepetidas)

function imprimirCheckbox (contenedor, eventos) {
  for (const evento of eventos) {
    const checkCreado = crearCheckbox(evento)
    contenedor.innerHTML += checkCreado
    }  
  }
imprimirCheckbox(categorias, arrayCategoriesNoRepetidas);



const checkfiltrado = function filtrarcheck (){
  const checked = document.querySelectorAll('input[type=checkbox]:checked')
  const arrayChecked = Array.from(checked).map(checkbox=>checkbox.value)
  const arrayFiltrado = data.events.filter(evento=>arrayChecked.includes(evento.category))
 console.log(arrayFiltrado)
  return arrayFiltrado
  }


categorias.addEventListener('change', checkfiltrado)

const busqueda = document.getElementById('busqueda')
console.log(busqueda)
busqueda.addEventListener('input', ()=>{
  filtrarPorNombreEvento(data.events, busqueda.value)
})


function filtrarPorNombreEvento (){
  let busquedaValue = busqueda.value
  const filtrado = data.events.filter(evento=>evento.name.toLowerCase().includes(busquedaValue.toLowerCase()))
  return filtrado
}

